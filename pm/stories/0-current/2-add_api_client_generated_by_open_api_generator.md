# Add api client generated by open api generator

## Overview
Establish type-safe communication between the NestJS API and React web client 
by implementing Swagger documentation and generating a TypeScript API client. 
This will improve developer experience, reduce runtime errors, and ensure API 
contract compliance.

## Tasks

### Core Implementation
 - [x] **Add swagger to the api package**
   - [x] Install `@nestjs/swagger` package
   - [x] Configure Swagger module in `app.module.ts`
   - [x] Add API documentation decorators to controllers and DTOs
   - [x] Ensure swagger is available only in dev mode or firebase emulator
   - [x] Disable swagger completely in production environment
   - [x] Set up swagger UI endpoint (e.g., `/api/docs`)

 - [ ] **Create api-client package in workspace**
   - [ ] Create `packages/api-client` directory
   - [ ] Set up `package.json` with TypeScript and axios dependencies
   - [ ] Configure TypeScript compilation settings
   - [ ] Add package to `pnpm-workspace.yaml`

 - [ ] **Set up API client generation**
   - [ ] Install `@openapitools/openapi-generator-cli` as dev dependency
   - [ ] Create generation script in root `scripts/` directory
   - [ ] Configure OpenAPI generator to use TypeScript-axios template
   - [ ] Add npm script to api-client package for generation
   - [ ] Set up proper output directory structure

 - [ ] **Update web package to use generated client**
   - [ ] Add api-client package as dependency to web package
   - [ ] Replace manual API calls with generated client methods
   - [ ] Add proper error handling and loading states
   - [ ] Update existing components to use typed API responses

### Development Workflow & Quality Assurance
 - [ ] **Add validation and testing**
   - [ ] Create tests to validate generated client matches API contracts
   - [ ] Add type checking for API responses in web package
   - [ ] Set up basic integration tests using generated client

 - [ ] **Documentation and developer experience**
   - [ ] Document client regeneration process in README
   - [ ] Add npm scripts for easy client regeneration
   - [ ] Create developer guidelines for API changes and client updates
   - [ ] Add comments explaining when to regenerate client

### Implementation Details

**Swagger Configuration:**
- Environment: Development and Firebase emulator only
- Endpoint: `/api/docs`
- Security: Completely disabled in production

**Generated Client:**
- Language: TypeScript
- HTTP Client: Axios
- Package location: `packages/api-client`
- Output format: ES modules with TypeScript definitions

**Integration Points:**
- Web package imports from `@sapie/api-client`
- Shared types between API and client
- Error handling with proper TypeScript types
